<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="./style.css" />
<script src="./lsystem.js"></script>
</head>
<body>

<div id="controls">
    <h2>L-System Controls</h2>
    <div>
        <label for="axiom">Axiom:</label>
        <input type="text" id="axiom" value="A">
    </div>
    <div style="margin-bottom: 20px;">
       <label for="rule">Rules (format: A=F+F--F+F):</label>
       <textarea id="rule" rows="5" style="width: 100%;">A=A-B--B+A++AA+B-
B=+A-BB--B-A++A+B
       </textarea>
   </div>
    <div>
        <label for="depth">Recursion Depth:</label>
        <input type="number" id="depth" value="5" min="1" max="8">
    </div>
    <div id="centerControl">
      <label for="centerX">Center</label>
      <input type="number" id="centerX" value="-.5" step="any">
      <input type="number" id="centerY" value=".5" step="any">
    </div>
    <div>
        <label for="length">Segment Length:</label>
        <input type="number" id="length" value="0.01">
    </div>
    <div>
        <label for="angle">Angle:</label>
        <input type="number" id="angle" value="60">
    </div>

    <hr />
    <div id="shaderCodeContainer" style="margin-top: 20px;">
    <button id="toggleShaderCode">Edit Shader Code</button>
    <div id="shaderCodeContent" style="display: none;">
      <button id="updateShader">Update Shaders</button>
        <textarea id="vertexShaderCode" rows="10" style="width: 100%;">
          attribute vec4 aVertexPosition;
          attribute float aDistance;
          varying highp float vDistance;

          void main(void) {
              gl_Position = aVertexPosition;
              vDistance = aDistance;
          }
        </textarea>
        <textarea id="fragmentShaderCode" rows="10" style="width: 100%;">
          precision mediump float;
          varying highp float vDistance;

          void main(void) {
              float modDistance = mod(vDistance, 1.0);
              vec3 colorA = vec3(0.1, 0.2, 0.5); // Darker blue
              vec3 colorB = vec3(0.4, 0.1, 0.2); // Darker pink
              vec3 colorC = vec3(0.1, 0.5, 0.1); // Darker green

              vec3 color;
              if(modDistance < 0.33) {
                  color = mix(colorA, colorB, modDistance / 0.33);
              } else if(modDistance < 0.66) {
                  color = mix(colorB, colorC, (modDistance - 0.33) / 0.33);
              } else {
                  color = mix(colorC, colorA, (modDistance - 0.66) / 0.33);
              }

              gl_FragColor = vec4(color, 1.); // Apply color with translucency
          }
        </textarea>
    </div>
</div>

    <button id="update">Create Link</button>
    <button id="tweet">Tweet</button>

</div>

<canvas id="glcanvas" width="1024" height="768"></canvas>
<div id="dragMessage" style="display: none;"><!--<h2>Click In This Area</h2>--></div>

</body>
</html>
